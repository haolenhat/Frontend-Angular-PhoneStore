<div class="container container-custom">
    <div class="row">
        <div class="col-12 p-3">
            <div id="carouselExampleIndicators" class="carousel slide ">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                        class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                        aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                        aria-label="Slide 3"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3"
                        aria-label="Slide 4"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="https://www.patternb.com/wp-content/uploads/2021/09/iphone-13-big-banner.jpg"
                            class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="https://imgcdn.stablediffusionweb.com/2024/5/9/02cc046f-2a6e-4ecc-a65f-95d6a5ed3b4c.jpg"
                            class="d-block w-100" alt="...">

                    </div>
                    <div class="carousel-item">
                        <img src="https://fecredit.com.vn/wp-content/uploads/2021/06/OPPO-Banner_1176x364-1.png"
                            class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item">
                        <img src="https://i02.appmifile.com/39_operator_my/25/09/2024/c6866316eaf26726e171f9dc403a6718.jpg?thumb=1&w=5120&f=webp&q=85"
                            class="d-block w-100" alt="...">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </div>
</div>

<app-spnew></app-spnew>
<!-- sản phẩm giảm giá -->
<div class="container container-custom mt-4">
    <div class="products">
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="discounted-products" role="tabpanel"
                aria-labelledby="discounted-products-tab">
                <div class="d-flex p-3 bg-white mb-3 align-items-center">
                    <img src="https://cdnv2.tgdd.vn/webmwg/2024/ContentMwg/images/noel/2024/tgdd/icon-title02.png"
                        width="30" />
                    <span class="font-weight-bold text-uppercase custom-h">Sản phẩm đang khuyến mãi</span>
                </div>
                <div class="row">
                    <div class="col-2 mb-3" *ngFor="let product of paginatedDiscountedProducts">
                        <div class="card card-custom" (click)="viewProduct(product.idSp)">
                            <img [src]="product.linkAnh" class="card-img-top" alt="{{ product.tenSp }}">
                            <div class="card-body">
                                <span class="font-weight-bold productname">{{ product.tenSp }}, {{ product.thongTinSp }}
                                    Chính hãng việt nam</span>
                                <div class="about-item">
                                    <div class="d-flex">
                                        <span class="font-weight-bold sale-product2">
                                            {{ getLowestDiscountedPrice(product) | customCurrency }}
                                        </span>
                                    </div>
                                    <div class="price-custom d-flex" *ngIf="getHighestDiscount(product) > 0">
                                        <span class="font-weight-bold sale-product1">
                                            {{ getLowestPrice(product) | customCurrency }}
                                        </span>
                                        <span class="font-weight-bold sale-product">
                                            -{{ getHighestDiscount(product) }}%
                                        </span>
                                    </div>
                                </div>
                                <p class="card-text mb-1 mt-1">Số lượt đánh giá và bình luận: {{ product.soLuotDanhGia
                                    }}</p>
                                <div class="product__promotions">
                                    <p>Không phí chuyển đổi khi trả góp 0% qua thẻ tín dụng kỳ hạn 3-6 tháng</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <nav class="phantrang" aria-label="Page navigation example">
                    <ul class="pagination">
                        <li class="page-item" [class.disabled]="currentDiscountedPage === 1"
                            (click)="goToDiscountedPage(currentDiscountedPage - 1)">
                            <div class="page-link">Previous</div>
                        </li>
                        <li class="page-item" *ngFor="let page of [].constructor(totalDiscountedPages); let i = index"
                            (click)="goToDiscountedPage(i + 1)">
                            <div class="page-link">{{ i + 1 }}</div>
                        </li>
                        <li class="page-item" [class.disabled]="currentDiscountedPage === totalDiscountedPages"
                            (click)="goToDiscountedPage(currentDiscountedPage + 1)">
                            <div class="page-link">Next</div>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>


<!-- Sản phẩm nhiều bình luận -->
<!-- <div class="container container-custom mt-4">
    <div class="products">
        <div class="tab-pane fade show active" id="highest-rated-products" role="tabpanel"
            aria-labelledby="highest-rated-products-tab">
            <div class="d-flex p-3 bg-white mb-3 align-items-center">
                <img src="https://cdnv2.tgdd.vn/webmwg/2024/ContentMwg/images/noel/2024/tgdd/icon-title02.png"
                    width="30" />
                <span class="font-weight-bold text-uppercase custom-h">Sản phẩm được đánh giá và bình luận nhiều
                    nhất</span>
            </div>
            <div class="row">
                <div class="col-2 mb-3" *ngFor="let product of paginatedSuggestedProducts">
                    <div class="card card-custom" (click)="viewProduct(product.idSp)">
                        <img [src]="product.linkAnh" class="card-img-top" alt="{{ product.tenSp }}">
                        <div class="card-body">
                            <span class="font-weight-bold productname">{{ product.tenSp }}, {{ product.thongTinSp }}
                                Chính hãng việt nam</span>
                            <div class="about-item">
                                <div class="d-flex">
                                    <span class="font-weight-bold sale-product2">
                                        {{ getLowestDiscountedPrice(product) | customCurrency }}
                                    </span>
                                </div>
                                <div class="price-custom d-flex" *ngIf="getHighestDiscount(product) > 0">
                                    <span class="font-weight-bold sale-product1">
                                        {{ getLowestPrice(product) | customCurrency }}
                                    </span>
                                    <span class="font-weight-bold sale-product">
                                        -{{ getHighestDiscount(product) }}%
                                    </span>
                                </div>
                            </div>
                            <p class="card-text mb-1 mt-1">Số lượt đánh giá và bình luận: {{ product.soLuotDanhGia }}
                            </p>
                            <div class="product__promotions">
                                <p>Không phí chuyển đổi khi trả góp 0% qua thẻ tín dụng kỳ hạn 3-6 tháng</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <nav class="phantrang" aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item" [class.disabled]="currentDiscountedPage === 1"
                        (click)="goToDiscountedPage(currentDiscountedPage - 1)">
                        <div class="page-link">Previous</div>
                    </li>
                    <li class="page-item" *ngFor="let page of [].constructor(totalDiscountedPages); let i = index"
                        (click)="goToDiscountedPage(i + 1)">
                        <div class="page-link">{{ i + 1 }}</div>
                    </li>
                    <li class="page-item" [class.disabled]="currentDiscountedPage === totalDiscountedPages"
                        (click)="goToDiscountedPage(currentDiscountedPage + 1)">
                        <div class="page-link">Next</div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div> -->
<!-- Tất cả sản phẩm -->
<div class="container container-custom mt-4">
    <div class="products">
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="all-products" role="tabpanel" aria-labelledby="all-products-tab">
                <div class="d-flex p-3 bg-white mb-3 align-items-center">
                    <img src="https://cdnv2.tgdd.vn/webmwg/2024/ContentMwg/images/noel/2024/tgdd/icon-title02.png"
                        width="30" />
                    <span class="font-weight-bold text-uppercase custom-h headingall">Tất cả sản phẩm</span>
                    <i class='bx bx-filter'></i>
                    <select class="form-select" [(ngModel)]="selectedCategory" (change)="filterProductsByCategory()">
                        <option value="all">Tất cả sản phẩm</option>
                        <option *ngFor="let category of categories" [value]="category.idDm">{{ category.tenDm }}
                        </option>
                    </select>

                    <div class="search-box">
                        <i class='bx bx-up-arrow-alt' (click)="onPriceAscClick()"></i>
                        <i class='bx bx-down-arrow-alt' (click)="onPriceDescClick()"></i>

                        <button class="btn-search"><i class="fas fa-search"></i></button>
                        <input type="text" class="input-search" placeholder="Nhập thông tin bạn cần...."
                            [(ngModel)]="searchKeyword" (ngModelChange)="onSearchInputChange($event)">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-2 mb-3 product-item" *ngFor="let product of paginatedAllProducts">
                    <div class="card card-custom" (click)="viewProduct(product.idSp)">
                        <img [src]="product.linkAnh" class="card-img-top" alt="{{ product.tenSp }}">
                        <div class="card-body">
                            <span class="font-weight-bold productname">{{ product.tenSp }}, {{ product.thongTinSp }}
                                Chính hãng việt nam</span>
                            <div class="about-item">
                                <div class="d-flex">
                                    <span class="font-weight-bold sale-product2">
                                        {{ formatPrice(getLowestDiscountedPrice(product)) }}
                                    </span>
                                </div>
                                <div class="price-custom d-flex" *ngIf="getHighestDiscount(product) > 0">
                                    <span class="font-weight-bold sale-product1">
                                        {{ getLowestPrice(product) | customCurrency }}
                                    </span>
                                    <span class="font-weight-bold sale-product">
                                        -{{ getHighestDiscount(product) }}%
                                    </span>
                                </div>
                            </div>
                            <p class="card-text mb-1 mt-1">Số lượt đánh giá và bình luận: {{ product.soLuotDanhGia }}
                            </p>
                            <div class="product__promotions">
                                <p>Không phí chuyển đổi khi trả góp 0% qua thẻ tín dụng kỳ hạn 3-6 tháng</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <nav class="phantrang" aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item" [class.disabled]="currentAllPage === 1"
                        (click)="goToAllPage(currentAllPage - 1)">
                        <div class="page-link">Previous</div>
                    </li>
                    <li class="page-item" *ngFor="let page of [].constructor(totalAllPages); let i = index"
                        (click)="goToAllPage(i + 1)">
                        <div class="page-link">{{ i + 1 }}</div>
                    </li>
                    <li class="page-item" [class.disabled]="currentAllPage === totalAllPages"
                        (click)="goToAllPage(currentAllPage + 1)">
                        <div class="page-link">Next</div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>


<!-- Tất cả sản phẩm -->
<!-- <div class="container container-custom mt-4">
    <div class="products">
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="all-products" role="tabpanel" aria-labelledby="all-products-tab">
                <div class="d-flex p-3 bg-white mb-3 align-items-center">
                    <img src="https://cdnv2.tgdd.vn/webmwg/2024/ContentMwg/images/noel/2024/tgdd/icon-title02.png"
                        width="30" />
                    <span class="font-weight-bold text-uppercase custom-h headingall">Sản phẩm mới nhất</span>
                    <i class='bx bx-filter'></i>
                    <select class="form-select" [(ngModel)]="selectedCategory" (change)="filterProductsByCategory()">
                        <option value="all">Tất cả sản phẩm</option>
                        <option *ngFor="let category of categories" [value]="category.idDm">{{ category.tenDm }}
                        </option>
                    </select>

                    <div class="search-box">
                        <i class='bx bx-up-arrow-alt' (click)="onPriceAscClick()"></i>
                        <i class='bx bx-down-arrow-alt' (click)="onPriceDescClick()"></i>

                        <button class="btn-search"><i class="fas fa-search"></i></button>
                        <input type="text" class="input-search" placeholder="Nhập thông tin bạn cần...."
                            [(ngModel)]="searchKeyword" (ngModelChange)="onSearchInputChange($event)">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-2 mb-3 product-item" *ngFor="let product of paginatedAllProducts">
                    <div class="card card-custom" (click)="viewProduct(product.idSp)">
                        <img [src]="product.linkAnh" class="card-img-top" alt="{{ product.tenSp }}">
                        <div class="card-body">
                            <span class="font-weight-bold productname">{{ product.tenSp }}, {{ product.thongTinSp }}
                                Chính hãng việt nam</span>
                            <div class="about-item">
                                <div class="d-flex">
                                    <span class="font-weight-bold sale-product2">
                                        {{ formatPrice(getLowestDiscountedPrice(product)) }}
                                    </span>
                                </div>
                                <div class="price-custom d-flex" *ngIf="getHighestDiscount(product) > 0">
                                    <span class="font-weight-bold sale-product1">
                                        {{ getLowestPrice(product) | customCurrency }}
                                    </span>
                                    <span class="font-weight-bold sale-product">
                                        -{{ getHighestDiscount(product) }}%
                                    </span>
                                </div>
                            </div>
                            <p class="card-text mb-1 mt-1">Số lượt đánh giá và bình luận: {{ product.soLuotDanhGia }}
                            </p>
                            <div class="product__promotions">
                                <p>Không phí chuyển đổi khi trả góp 0% qua thẻ tín dụng kỳ hạn 3-6 tháng</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <nav class="phantrang" aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item" [class.disabled]="currentAllPage === 1"
                        (click)="goToAllPage(currentAllPage - 1)">
                        <div class="page-link">Previous</div>
                    </li>
                    <li class="page-item" *ngFor="let page of [].constructor(totalAllPages); let i = index"
                        (click)="goToAllPage(i + 1)">
                        <div class="page-link">{{ i + 1 }}</div>
                    </li>
                    <li class="page-item" [class.disabled]="currentAllPage === totalAllPages"
                        (click)="goToAllPage(currentAllPage + 1)">
                        <div class="page-link">Next</div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div> -->